<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 
    endpoint
    http://api.openweathermap.org/data/2.5/weather?id=1897007&appid=cd63accc133fc76e1f94a3f270442688&units=metric

    key
    bd5b86ca25c98b482e2c4d5309da05a2

    도시코드
    수원 1835553
    서울 1835848 

    이미지 url
    https://openweathermap.org/img/wn/10d@2x.png
    -->
</head>

<body>
    <h1>Weather api</h1>
    <h2>날씨예보</h2>
    <div class="city">지역 : </div>
    <div class="date">날짜 : </div>
    <div class="ctemp">현재온도 : </div>
    <div class="clowtemp">최저온도 : </div>
    <div class="cheightemp">최고온도 : </div>
    <div class="cicon">아이콘</div>
    <img src="" alt="">

    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
        // $(function(){
        //     $.getJSON("날씨", function(data){
        //      data 할일   
        //     })
        // })
        $(function(){
            $.getJSON("https://api.openweathermap.org/data/2.5/weather?id=1835553&appid=cd63accc133fc76e1f94a3f270442688&units=metric", function(data){
                // console.log(data.cod);
                // console.log(data.city.name);
                // console.log(data.list[0].main.temp);
                var city = data.name;
                var temp = data.main.temp;
                var maxTemp = data.main.temp_max;
                var minTemp = data.main.temp_min;
                var wIcon = data.weather[0].icon;
                
                var now = new Date();
                // var cDate = now.getFullYear() + '/' + (now.getMonth() + 1) + '/' + now.getDate() + '/' + now.getHours() + '/' + now.getMinutes();
                var cDate = new Date().toLocaleString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' });
                console.log(wIcon)
                $('.city').append(city);
                $('h2').prepend(city);
                $('.date').append(cDate);
                $('.ctemp').append(temp);
                $('.clowtemp').append(minTemp);
                $('.cheightemp').append(maxTemp);
                $('img').attr('src', `https://openweathermap.org/img/wn/${wIcon}.png`);
            })
        })
    </script>
</body>
</html>